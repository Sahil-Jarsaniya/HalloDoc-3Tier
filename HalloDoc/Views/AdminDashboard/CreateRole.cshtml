@model CreateRole;
@{
    ViewData["Title"] = "Admin Profile";
    Layout = "_adminLayout";
}

<div>
    <div class="container d-flex justify-content-between mt-4" style="max-width:1000px">
        <h4>
            Create Role
        </h4>
        <a onclick="history.go(-1)" class="btn btn-outline-primary m-2 text-decoration-none float-end"
           id="back-btn">
            <img src="~/images/arrow_back_ios_FILL0_wght400_GRAD0_opsz24.svg" class="img-fluid" alt="">
            Back
        </a>
    </div>
    <div class="container shadow mt-4 " style="max-width:1000px" id="ProviderTable">
        <form class="viewCaseForm form-floating patient-request-form p-3">
            <h5>
                Details
            </h5>
            <div class="row g-2 m-1">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input  type="text" class="form-control" placeholder="">
                        <label for="">Role Name</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <select id="AccountType" class="form-select form-select mb-3 RegionSelect" aria-label="Large select example">
                                <option value="0">All</option>
                            @foreach(var item in Model.accountTypes)
                            {   
                            <option value="@item.Id">@item.Name</option>
                            }
                        </select>
                        <label>Account Type</label>
                    </div>
                </div>
            </div>
            <div id="PageList">
                @foreach(var item in Model.Menu)
                {
                    <input type="checkbox" id="@item.Menuid" name="@item.Menuid" value="@item.Menuid" class="me-1" />
                    <label class="me-3" for="@item.Menuid">@item.Name</label>
                }
            </div>
            <button type="reset" id="" class="btn btn-outline-primary float-end " >Cancel</button>
            <button type="submit" class="btn btn-primary float-end me-1" >Save</button><br /><br />
        </form>
    </div>
</div>

@section AdminScript {
    <script>
        $("#AccountType").change(function(){
            $("#PageList").empty();
            var val = $(this).val();
            
            $.ajax({
                url:'/AdminDashboard/PageListFilter',
                type: 'POST',
                data: {id: val},
                success: function(data){
                    $.each(data, function(index, item){
                        var checkbox = $('<input>').attr({
                            type: 'checkbox',
                            value: item.menuid,
                            id: item.menuid
                        }).addClass('me-1')
                        var label = $('<label>').attr('for', item.menuid).text(item.name).addClass('me-4');
                        $("#PageList").append(checkbox).append(label);
                    })
                }
            })
        })
    </script>
}